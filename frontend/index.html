<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sistema de Compras</title>
  <link rel="stylesheet" href="./css/main.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header>
    <h1>Sistema de Compras</h1>
    <nav>
      <button data-section="usuarios">Usuários</button>
      <button data-section="produtos">Produtos</button>
      <button data-section="compras">Compras</button>
      <button data-section="relatorios">Relatórios</button>
      <button data-section="graficos">Gráficos</button>
      <button data-section="lote">Cadastrar Lote</button>
    </nav>
  </header>
  <main>
    <section id="usuarios" class="hidden usuario-section">
      <div class="usuario-header">
        <h2>Buscar Usuários</h2>
        <button id="btnCadastrarUsuario" class="btn-cadastrar">Cadastrar Novo Usuário</button>
      </div>

      <div class="form-busca">
        <label for="metodoBusca">Método de Busca:</label>
        <select id="metodoBusca">
          <option value="id">Por ID</option>
          <option value="nome">Por Nome</option>
        </select>

        <input id="inputBuscaUsuario" placeholder="Digite o valor da busca" />
        <button id="btnBuscarUsuario" class="btn-buscar">Buscar</button>
      </div>

      <table id="tableUsuarios" class="table-usuario">
        <thead>
          <tr>
            <th>ID</th>
            <th>Primeiro Nome</th>
            <th>Sobrenome</th>
            <th>Idade</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>Endereço</th>
            <th>Cidade</th>
            <th>Estado</th>
            <th>Data Nasc.</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <!-- Modal de Cadastro -->
      <div id="modalCadastro" class="modal hidden">
        <div class="modal-content">
          <span id="modalClose" class="modal-close">&times;</span>
          <h3>Cadastrar Novo Usuário</h3>
          <form id="formCadastroUsuario">
            <input type="hidden" name="idUsuario" />
            <div class="form-group"><label>Primeiro Nome<input name="primeiroNome" required /></label></div>
            <div class="form-group"><label>Sobrenome<input name="sobrenome" required /></label></div>
            <div class="form-group"><label>Idade<input name="idade" type="number" min="0" max="120" required /></label>
            </div>
            <div class="form-group"><label>Email<input name="email" type="email" required /></label></div>
            <div class="form-group"><label>Telefone<input name="telefone" required /></label></div>
            <div class="form-group"><label>Endereço<input name="endereco" required /></label></div>
            <div class="form-group"><label>Cidade<input name="cidade" required /></label></div>
            <div class="form-group"><label>Estado<input name="estado" required /></label></div>
            <div class="form-group"><label>Data Nasc.<input name="dataNascimento" type="date" required /></label></div>
            <div id="formError" class="form-error hidden"></div>
            <button type="submit" class="btn-submit">Salvar</button>
          </form>
        </div>
      </div>
    </section>
    <section id="produtos" class="hidden produto-section">
      <div class="produto-header">
        <h2>Gerenciar Produtos</h2>
        <button id="btnCadastrarProduto" class="btn-cadastrar-produto">Cadastrar Novo Produto</button>
      </div>

      <div class="form-busca">
        <label for="metodoBuscaProduto">Buscar Por:</label>
        <select id="metodoBuscaProduto">
          <option value="idProduto">Por ID</option>
          <option value="titulo">Por Título</option>
        </select>

        <input id="inputBuscaProduto" placeholder="Digite o valor da busca" />
        <button id="btnBuscarProduto" class="btn-buscar">Buscar</button>
      </div>

      <table id="tableProdutos" class="table-produto">
        <thead>
          <tr>
            <th>ID</th>
            <th>Título</th>
            <th>Descrição</th>
            <th>Categoria</th>
            <th>Preço (R$)</th>
            <th>% Desconto</th>
            <th>Estoque</th>
            <th>Marca</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!-- Modal de Cadastro/edição de Produto -->
      <div id="modalCadastroProduto" class="modal hidden">
        <div class="modal-content">
          <span id="modalCloseProduto" class="modal-close">&times;</span>
          <h3>Cadastrar / Editar Produto</h3>
          <form id="formCadastroProduto">
            <input type="hidden" name="idProduto" />

            <div class="form-group">
              <label>Título
                <input name="titulo" type="text" required />
              </label>
            </div>
            <div class="form-group">
              <label>Descrição
                <textarea name="descricao" rows="3" required></textarea>
              </label>
            </div>
            <div class="form-group">
              <label>Categoria
                <input name="categoria" type="text" required />
              </label>
            </div>
            <div class="form-group">
              <label>Preço (R$)
                <input name="preco" type="number" step="0.01" min="0" required />
              </label>
            </div>
            <div class="form-group">
              <label>% Desconto
                <input name="percentualDesconto" type="number" step="0.01" min="0" max="100" required />
              </label>
            </div>
            <div class="form-group">
              <label>Estoque
                <input name="estoque" type="number" min="0" required />
              </label>
            </div>
            <div class="form-group">
              <label>Marca
                <input name="marca" type="text" />
              </label>
            </div>

            <div id="formErrorProduto" class="form-error hidden"></div>
            <button type="submit" class="btn-submit">Salvar</button>
          </form>
        </div>
      </div>
    </section>

    <section id="compras" class="hidden compra-section">
      <div class="compra-header">
        <h2>Gerenciar Compras</h2>
        <button id="btnCadastrarCompra" class="btn-cadastrar-compra">Nova Compra</button>
      </div>

      <div class="form-busca">
        <label for="metodoBuscaCompra">Buscar Por:</label>
        <select id="metodoBuscaCompra">
          <option value="idCompra">Por ID</option>
        </select>

        <input id="inputBuscaCompra" placeholder="Digite o valor da busca" />
        <button id="btnBuscarCompra" class="btn-buscar">Buscar</button>
      </div>

      <table id="tableCompras" class="table-compra">
        <thead>
          <tr>
            <th>ID</th>
            <th>Usuário</th>
            <th>Produto</th>
            <th>Quantidade</th>
            <th>Data</th>
            <th>Preço Unit.</th>
            <th>Desconto</th>
            <th>Preço Final</th>
            <th>Pagamento</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!-- Modal de Cadastro/Edição -->
      <div id="modalCadastroCompra" class="modal hidden">
        <div class="modal-content">
          <span id="modalCloseCompra" class="modal-close">&times;</span>
          <h3>Nova / Editar Compra</h3>
          <form id="formCadastroCompra">
            <input type="hidden" name="idCompra" />

            <div class="form-group">
              <label>Usuário
                <input name="idUsuario" type="number" min="1" required />
              </label>
            </div>
            <div class="form-group">
              <label>Produto
                <input name="idProduto" type="number" min="1" required />
              </label>
            </div>
            <div class="form-group">
              <label>Quantidade
                <input name="quantidade" type="number" min="1" required />
              </label>
            </div>
            <div class="form-group">
              <label>Data da Compra
                <input name="dataCompra" type="datetime-local" required />
              </label>
            </div>
            <div class="form-group">
              <label>Preço Unitário (R$)
                <input name="precoUnitario" type="number" step="0.01" min="0" required />
              </label>
            </div>
            <div class="form-group">
              <label>Desconto Aplicado (%)
                <input name="descontoAplicado" type="number" step="0.01" min="0" max="100" required />
              </label>
            </div>
            <div class="form-group">
              <label>Preço Final (R$)
                <input name="precoFinal" type="number" step="0.01" min="0" required />
              </label>
            </div>
            <div class="form-group">
              <label>Forma de Pagamento
                <input name="formaPagamento" type="text" required />
              </label>
            </div>
            <div class="form-group">
              <label>Status da Compra
                <input name="statusCompra" type="text" required />
              </label>
            </div>

            <div id="formErrorCompra" class="form-error hidden"></div>
            <button type="submit" class="btn-submit">Salvar</button>
          </form>
        </div>
      </div>
    </section>


    <section id="relatorios" class="hidden">
      <h2>Relatórios Gerenciais</h2>
      <div class="tabs">
        <button data-report="usuarios">Usuários</button>
        <button data-report="produtos">Produtos</button>
        <button data-report="compras">Compras</button>
        <button data-report="estoque">Estoque Crítico</button>
        <button data-report="consolidado">Consolidado</button>
      </div>
      <div id="reportContent"></div>
    </section>

    <section id="graficos" class="hidden">
      <h2>Gráficos</h2>
      <div class="charts-filters">
        <label>ID inicial: <input type="number" id="filterStart" value="1" /></label>
        <label>ID final: <input type="number" id="filterEnd" value="10" /></label>
        <button id="btnUpdateCharts">Atualizar gráficos</button>
      </div>
      <canvas id="chartProdutos"></canvas>
      <canvas id="chartUsuarios"></canvas>
    </section>

    <section id="lote" class="hidden">
      <h2>Povoamento em Lote</h2>
      <button id="btnSeed">Executar Povoamento</button>
      <pre id="seedLogs" class="logs"></pre>
    </section>
  </main>
  <script type="module" src="./js/main.js"></script>
  <script type="module" src="./js/lote/seed.js"></script>
</body>

</html>